# 在线编织 - 场景驱动的架构设计

## 一、核心用户场景（最重要）

### 场景1：编织填充字母（核心场景）

**角色**：创作者（需要放松、寻求平静的用户）  
**触发**：感到疲惫或焦虑时，想通过创作获得平静  
**目标**：通过点击"编织"一个字母，在重复的动作和音效中获得平静、快乐和成就感  

**步骤**：
1. **打开网页**
   - 用户看到温暖的渐变背景（如奶油色渐变到淡粉色）
   - 画布中心有一个字母"A"的轮廓（黑色线条）
   - 简单的提示："点击开始编织"

2. **第一次点击**
   - 用户在字母轮廓内部点击任意位置
   - 系统在该位置渲染一小块毛茸茸的毛线纹理（像一个小的填充像素）
   - 同时播放清脆悦耳的音效（类似Patatap的音乐反馈）
   - 毛线块有轻微的出现动画（缩放或淡入效果）

3. **持续点击填充**
   - 用户随意在字母内部点击不同位置
   - 每次点击都填充一小块毛线（像素点）
   - 每次音效略有不同，形成旋律变化
   - 点击的区域逐渐增多，字母被慢慢"织满"

4. **自由创作**
   - 用户可以点击已填充的区域（覆盖或改变纹理方向）
   - 可以只填充部分区域，形成独特图案
   - 没有对错，完全自由

5. **完成作品**
   - 用户觉得满意时，点击右下角"完成"按钮
   - 或者：当字母被填充到一定程度（如70%），系统轻柔提示"作品可以完成了"（不强制）
   - 画布缩放，展示完整作品

6. **保存与重新开始**
   - 显示完成提示："您编织了字母'A'"
   - 可以下载图片（PNG格式）
   - 点击"清空重新开始"可以重新编织

**涉及的外部系统**：无（MVP版本纯前端实现）

---

### 场景2：下载作品（次要场景）

**角色**：创作者  
**触发**：完成编织后  
**目标**：保存自己的作品  

**步骤**：
1. 点击"完成"后，作品放大展示
2. 点击"下载"按钮
3. 系统生成PNG图片，自动下载到本地
4. 文件名：`weave_A_[时间戳].png`

**涉及的外部系统**：浏览器下载API

---

### 场景3：清空重新编织（次要场景）

**角色**：创作者  
**触发**：想重新创作，或者不满意当前作品  
**目标**：清空画布，重新开始  

**步骤**：
1. 点击"清空"按钮
2. 所有填充的毛线逐渐淡出（动画）
3. 回到初始状态（只有字母轮廓）
4. 可以重新开始点击编织

**涉及的外部系统**：无

---

## 二、系统类比

这个系统就像**数字涂色书 + 手工编织**：

- **场景1（编织填充）** 就像 **儿童用蜡笔填充涂色书**
  - 涂色书有轮廓 → 字母轮廓
  - 孩子在区域内涂色 → 用户点击填充毛线
  - 逐渐填满 → 获得成就感

- **音效反馈** 就像 **打碟机（Patatap）**
  - 每次操作都有即时的听觉奖励
  - 音效变化形成旋律 → 让重复动作不枯燥

- **毛线质感** 就像 **真实的编织物**
  - 毛茸茸的纹理 → 温暖、治愈的感觉
  - 手工感 → 像亲手创造了实物

- **整体体验** 就像 **抄经**
  - 重复的动作 → 平静大脑
  - 渐进式成就 → 持续的正反馈
  - 最后完成作品 → 满足感

---

## 三、C1图说明（系统全景）

### 架构元素

- **目标系统**：在线编织Web应用 - 一个让用户通过点击"编织"图案来获得平静和快乐的Web应用

- **用户角色**：
  - 创作者：需要放松、寻求平静的用户，参与所有场景

- **外部系统**：
  - 浏览器下载API：用于场景2（下载作品）

### 场景在C1图中的体现

- **场景1（编织填充）**：创作者 → 在线编织系统（"点击填充毛线、播放音效"）
- **场景2（下载作品）**：创作者 → 在线编织系统 → 浏览器下载API（"下载图片"）
- **场景3（清空重建）**：创作者 → 在线编织系统（"清空画布"）

---

## 四、C2图说明（技术实现）

### 容器列表

- **前端应用**：
  - Web画布应用：支撑场景1的点击交互、渲染毛线纹理、播放音效 | 技术：HTML5 Canvas + JavaScript
  
- **资源文件**：
  - 音效资源：存储各种音效文件 | 格式：MP3/WAV
  - 毛线纹理素材：毛茸茸的纹理图片 | 格式：PNG

- **外部集成**：
  - 浏览器API：场景2使用的Canvas.toBlob + 下载功能 | 提供方：浏览器原生API

### 场景实现路径

- **场景1的技术流程**：
  1. 用户点击 → 前端捕获鼠标事件
  2. 前端判断点击位置是否在轮廓内
  3. 在Canvas上渲染毛线纹理（使用预加载的纹理素材）
  4. 同时播放音效（从音效库中选择）
  5. 更新填充进度

- **场景2的技术流程**：
  1. 用户点击"下载" → 前端调用Canvas.toBlob()
  2. 生成PNG图片数据
  3. 使用浏览器下载API保存到本地

- **场景3的技术流程**：
  1. 用户点击"清空" → 前端清除Canvas内容
  2. 重置填充状态
  3. 重新渲染初始的字母轮廓

### MVP技术栈建议

- **前端**：纯HTML + CSS + JavaScript（或使用p5.js/Three.js简化Canvas操作）
- **音效**：Howler.js（音频库）
- **无需后端**：所有逻辑在前端实现
- **无需数据库**：不保存历史记录

---

## 五、客户沟通话术

### 讲解C1图（30秒版本）

"这个应用非常简单：
- **创作者**（您）打开网页，看到一个字母轮廓
- 您通过**点击**来"编织"这个字母，每次点击都会填充一小块毛线，并播放美妙的音效
- 完成后可以**下载**保存，或者**清空**重新创作
- 整个过程像涂色书一样简单，像抄经一样平静"

### 讲解C2图（30秒版本）

"从技术角度，这是一个纯前端应用：
- **Web画布**：用户看到的界面，处理点击、渲染毛线、播放声音
- **资源文件**：预先准备的音效和毛线纹理素材
- **浏览器API**：用于下载功能
- **MVP版本不需要服务器和数据库**，打开就能用"

---

## 六、核心设计要点

### UI设计要点

1. **背景**：温暖的渐变色（奶油→淡粉/淡蓝），给人平静感
2. **字母轮廓**：简洁的黑色线条，居中放置，足够大（占画布60-70%）
3. **毛线纹理**：
   - 每个填充块约10-20像素
   - 毛茸茸的质感（边缘柔和，不是硬边）
   - 可以有轻微的方向变化（增加手工感）
4. **交互反馈**：
   - 鼠标悬停在字母内部时，光标变化
   - 点击时有轻微的视觉反馈（闪烁、缩放）
5. **UI元素**：极简设计
   - 右下角："完成"按钮
   - 左下角："清空"按钮
   - 无其他干扰元素

### 音效设计要点

1. **音效库**：准备8-12个不同音高的音效
2. **播放策略**：
   - 每次点击随机或按规律选择音效
   - 可以根据点击位置（X/Y坐标）映射到不同音高
3. **音色**：清脆、治愈，类似木琴、钢片琴、钵的声音
4. **音量**：适中，不刺耳

### 毛线纹理实现

**方案A（简单）**：
- 使用预制的毛线纹理PNG图片
- 每次点击在该位置绘制一个小的纹理块
- 可以随机旋转角度（0°/45°/90°等）

**方案B（高级）**：
- 使用WebGL着色器生成毛线纹理
- 更真实，但实现复杂

**推荐MVP使用方案A**

---

## 七、MVP开发建议

### 最小可行版本包含

✅ **必须有**：
1. 字母"A"的轮廓（固定）
2. 点击填充毛线纹理
3. 音效反馈（至少5个不同音效）
4. 下载功能
5. 清空功能

❌ **可以省略**：
- 多个字母选择（只做一个字母）
- 作品历史记录
- 自定义颜色
- 分享到社交媒体
- 后台保存

### 技术实现步骤

1. **搭建基础画布**（HTML + Canvas）
2. **绘制字母轮廓**（使用SVG路径或Canvas API）
3. **实现点击检测**（判断是否在轮廓内）
4. **渲染毛线纹理**（加载PNG，绘制到点击位置）
5. **集成音效**（使用Howler.js）
6. **实现下载功能**（Canvas.toBlob）
7. **优化动画和体验**（添加过渡效果）

### 开发工时估算（供参考）

- 基础画布和交互：4小时
- 字母轮廓绘制：2小时
- 毛线纹理渲染：4小时
- 音效集成：3小时
- 下载功能：2小时
- UI美化和动画：4小时
- 测试和优化：3小时

**总计：约22小时（3个工作日）**

---

## 八、未来扩展方向（V2+）

1. **更多图案**：26个字母、数字、简单图形（心形、星星）
2. **颜色选择**：用户可以选择毛线颜色
3. **背景主题**：多个背景可选（黄昏、星空、森林）
4. **作品集**：保存历史作品，本地存储
5. **分享功能**：生成分享链接或社交媒体分享
6. **音乐模式**：根据点击生成连续的旋律（更接近Patatap）
7. **移动端优化**：触摸屏优化，手势支持

---

## 九、成功标准

### 用户体验目标

- ✅ 用户能在**10秒内**理解如何使用（无需说明）
- ✅ 用户能**持续创作3-5分钟**而不感到无聊
- ✅ 用户完成作品后有**满足感和平静感**
- ✅ 用户愿意**重复使用**（再次编织或分享给朋友）

### 技术目标

- ✅ 页面加载时间 < 3秒
- ✅ 点击响应时间 < 50ms
- ✅ 音效播放流畅无卡顿
- ✅ 兼容主流浏览器（Chrome、Safari、Firefox）
- ✅ 移动端基本可用

---

**提示词版本**：v1.0（MVP版本）  
**核心玩法**：像素填充 + 毛线质感 + 音效反馈  
**适用场景**：个人减压、冥想辅助、创意放松  
**预期体验时长**：3-10分钟/次  
**目标用户**：需要放松、喜欢简单创作的人群

